<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- iOS Background Audio - ARTICLE -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Rean-Sdab">
<link rel="apple-touch-icon" href="/assets/images/icon-192.png">
<link rel="apple-touch-icon" sizes="192x192" href="/assets/images/icon-192.png">
<link rel="apple-touch-icon" sizes="512x512" href="/assets/images/icon-512.png">
<meta name="theme-color" content="#dc2626">
<meta name="mobile-web-app-capable" content="yes">
<!-- For iOS lock screen controls -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Audio Articles">
<link rel="apple-touch-icon" href="/assets/images/logo.png">

<!-- For Android -->
<meta name="mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#dc2626">

<!-- For Media Session -->
<meta property="og:audio" content="">
<meta property="og:audio:type" content="audio/mpeg">

<!-- Open Graph for article sharing -->
<meta property="og:type" content="article">
<meta property="og:site_name" content="Rean-Sdab">
<!-- These will be dynamically updated by JavaScript -->
<meta property="og:title" content="Rean-Sdab - ·ûö·üÄ·ûì·ûü·üí·ûä·û∂·ûî·üã">
<meta property="og:description" content="·ûü·üí·ûä·û∂·ûî·üã·ûÖ·üÜ·ûé·üÅ·üá·ûä·ûπ·ûÑ·ûì·üÖ·ûñ·üÅ·ûõ·ûé·û∂·ûÄ·üè·ûî·û∂·ûì">
<meta property="og:image" content="https://yourdomain.com/assets/images/icon-512.png">
<meta property="og:audio" content="">
<meta property="og:audio:type" content="audio/mpeg">
    <title>Audio Article</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Odor+Mean+Chey&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&display=swap" rel="stylesheet">
<style>
    body { 
        font-family: 'Odor Mean Chey', serif; 
        background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
        min-height: 100vh;
    }
    /* Force stop spinner animation when hidden */
.fa-spinner.hidden {
    animation: none !important;
    display: none !important;
}

/* Make sure buffering indicator is truly hidden */
#bufferingIndicator:not(.active) {
    display: none !important;
}
    .brand-color { color: #dc2626; }
    .brand-bg { background-color: #dc2626; }
    .glass-effect {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }
    /* Progress bar styles */
    .progress-bar {
        -webkit-appearance: none;
        appearance: none;
        width: 100%;
        height: 4px;
        background: #e5e7eb;
        border-radius: 2px;
        outline: none;
    }
    /* Professional English font for logo/brand name only */
.brand-logo {
    font-family: 'Poppins', 'Montserrat', 'Inter', sans-serif !important;
    font-weight: 700 !important;
    letter-spacing: -0.5px;
}

    .progress-bar::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 16px;
        height: 16px;
        background: #dc2626;
        border-radius: 50%;
        cursor: pointer;
        border: 2px solid white;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .progress-bar::-moz-range-thumb {
        width: 16px;
        height: 16px;
        background: #dc2626;
        border-radius: 50%;
        cursor: pointer;
        border: 2px solid white;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    /* Progress handle animations */
    .progress-handle {
        transition: left 0.1s ease;
    }
    /* Add to your styles.css */
#articleContent {
    margin-bottom: 2rem;
}

#relatedArticles {
    margin-top: 3rem;
    margin-bottom: 6rem; /* Extra space for audio player */
}

.related-articles-grid {
    display: grid;
    gap: 1rem;
}

/* Ensure audio player doesn't cover content */
#miniPlayer {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: white;
    border-top: 1px solid #e5e7eb;
    z-index: 1000;
}

body {
    padding-bottom: 80px; /* Space for audio player */
}

    /* Buffered progress style */
    .buffered-progress {
        background: #9ca3af;
        height: 100%;
        border-radius: 2px;
        position: absolute;
        top: 0;
        left: 0;
    }
    /* Custom scrollbar */
    ::-webkit-scrollbar {
        width: 6px;
    }
    ::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 10px;
    }
    ::-webkit-scrollbar-thumb {
        background: #dc2626;
        border-radius: 10px;
    }
    ::-webkit-scrollbar-thumb:hover {
        background: #b91c1c;
    }
    
    /* Loading animation */
    .loading-spinner {
        border: 3px solid #f3f3f3;
        border-top: 3px solid #dc2626;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    /* Smooth transitions */
    .smooth-transition {
        transition: all 0.3s ease;
    }
    
    /* Audio player animations */
    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
    }
    .pulse-animation {
        animation: pulse 2s infinite;
    }

        /* ===== FIX PROGRESS BAR HANDLE POSITIONING ===== */

/* Mini Player Progress */
#miniPlayer .relative {
    position: relative;
    height: 6px; /* Match h-1.5 (1.5 * 4px = 6px) */
}

#miniProgressHandle {
    position: absolute;
    top: 50%;
    left: 0%;
    width: 12px;
    height: 12px;
    background: white;
    border: 2px solid #dc2626;
    border-radius: 50%;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    transform: translate(-50%, -50%);
    transition: left 0.1s ease;
    z-index: 20;
    margin-top: 0;
}

/* Full Player Progress */
#fullPlayer .relative.group {
    position: relative;
    height: 8px; /* Match h-2 (2 * 4px = 8px) */
}

#fullProgressHandle {
    position: absolute;
    top: 50%;
    left: 0%;
    width: 16px;
    height: 16px;
    background: white;
    border: 3px solid #dc2626;
    border-radius: 50%;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    transform: translate(-50%, -50%);
    transition: left 0.1s ease, opacity 0.2s ease;
    z-index: 20;
    opacity: 0;
    margin-top: 0;
}

#fullPlayer .relative.group:hover #fullProgressHandle {
    opacity: 1;
}

/* Ensure progress bars are visible */
#miniProgress {
    height: 6px;
    position: absolute;
    top: 0;
    left: 0;
    border-radius: 3px;
}

#fullProgress {
    height: 8px;
    position: absolute;
    top: 0;
    left: 0;
    border-radius: 4px;
}

/* Progress bar backgrounds */
#miniPlayer .bg-gray-300,
#fullPlayer .bg-gray-300 {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    border-radius: inherit;
}
    /* Make progress bars more visible */
    #miniProgress, #fullProgress {
        background: #dc2626 !important;
        transition: width 0.1s linear;
    }

    /* Progress bar background */
    #miniPlayer .bg-gray-300, #fullPlayer .bg-gray-300 {
        background: #e5e7eb !important;
    }

    /* === PROFESSIONAL NUMBER STYLING === */
    /* Professional time display with tabular numbers */
    #miniCurrentTime, #miniDuration,
    #fullCurrentTime, #fullDuration {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        font-variant-numeric: tabular-nums;
        font-feature-settings: "tnum";
        font-weight: 500;
    }

    /* Mini player - smaller, lighter */
    #miniCurrentTime, #miniDuration {
        font-size: 11px;
        font-weight: 500;
        color: #6b7280;
    }

    /* Full player - larger, bolder */
    #fullCurrentTime, #fullDuration {
        font-size: 14px;
        font-weight: 600;
        color: #374151;
    }

    /* Ensure perfect number alignment */
    .tabular-nums {
        font-variant-numeric: tabular-nums;
        font-feature-settings: "tnum";
    }

    .time-display {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        font-variant-numeric: tabular-nums;
    }
        /* === PROFESSIONAL ENGLISH NUMBER STYLING === */
    /* Professional time display with tabular numbers */
    #miniCurrentTime, #miniDuration,
    #fullCurrentTime, #fullDuration {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        font-variant-numeric: tabular-nums;
        font-feature-settings: "tnum";
        font-weight: 500;
    }

    /* Mini player - smaller, lighter */
    #miniCurrentTime, #miniDuration {
        font-size: 11px;
        font-weight: 500;
        color: #6b7280;
    }

    /* Full player - larger, bolder */
    #fullCurrentTime, #fullDuration {
        font-size: 14px;
        font-weight: 600;
        color: #374151;
    }

    /* Ensure perfect number alignment */
    .tabular-nums {
        font-variant-numeric: tabular-nums;
        font-feature-settings: "tnum";
    }

    .time-display {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        font-variant-numeric: tabular-nums;
    }

    /* Professional number styling for all numeric displays */
    .professional-numbers {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        font-variant-numeric: tabular-nums;
        font-feature-settings: "tnum";
        font-weight: 500;
    }
        /* Speed button number styling */
    #speedBtn {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif !important;
        font-variant-numeric: tabular-nums !important;
        font-feature-settings: "tnum" !important;
        font-weight: 600 !important;
    }
    #articleContent {
        margin-bottom: 2rem;
        min-height: 50vh; /* Ensure enough content space */
    }

    #relatedArticles {
        margin-top: 3rem;
        margin-bottom: 8rem; /* Extra space for audio player */
    }

    /* Make related articles more prominent */
    #relatedArticlesList {
        display: grid;
        gap: 1rem;
    }

    /* Ensure audio player doesn't cover content */
    #miniPlayer {
        position: fixed;
        bottom: 0;
        left: 1rem;
        right: 1rem;
        background: white;
        border-top: 1px solid #e5e7eb;
        z-index: 1000;
        margin-bottom: 1rem;
    }

    body {
        padding-bottom: 100px; /* Space for audio player */
    }

    /* Make related articles stand out more */
    #relatedArticles {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 1rem;
        padding: 1.5rem;
    }

    #relatedArticles h3 {
        font-size: 1.5rem;
        font-weight: bold;
        color: #1f2937;
        margin-bottom: 1.5rem;
    }

    /* === CRITICAL FIX - MAKE BUTTONS CLICKABLE === */
#audioPlayerContainer {
    pointer-events: none;
}

#audioPlayerContainer button,
#audioPlayerContainer input {
    pointer-events: auto !important;
    position: relative;
    z-index: 10000 !important;
    cursor: pointer !important;
}

/* Ensure controls container is above progress bars */
.flex.items-center.justify-center.space-x-6.mb-6 {
    position: relative;
    z-index: 10000 !important;
}

/* Make sure progress bars don't cover buttons */
#progressInput, #miniProgressInput {
    z-index: 1 !important;
}

/* Specific button fixes */
#rewindBtn, #forwardBtn, #playPauseBtn, #miniPlayBtn {
    z-index: 10001 !important;
}
/* Fix English numbers */
.english-numbers,
.time-display,
#miniCurrentTime, #miniDuration,
#fullCurrentTime, #fullDuration,
.professional-numbers {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif !important;
    font-variant-numeric: lining-nums !important;
    font-feature-settings: "lnum" !important;
}
</style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="glass-effect shadow-sm sticky top-0 z-50">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="/" class="flex items-center space-x-2 smooth-transition">
                    <i class="fas fa-headphones brand-color text-2xl"></i>
                    <span class="brand-logo font-bold text-xl text-gray-800">Rean-Sdab</span>
                </a>
                </div>
                <a href="/" class="text-gray-600 hover:brand-color transition-colors flex items-center space-x-2">
                    <i class="fas fa-arrow-left"></i>
                    <span class="hidden sm:inline">·ûè·üí·ûö·û°·ûî·üã·ûë·üÖ·ûë·üÜ·ûñ·üê·ûö·ûä·ûæ·ûò</span>
                </a>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <!-- Article Content -->
        <div class="glass-effect rounded-2xl shadow-xl overflow-hidden mb-6 smooth-transition">
            <div id="articleContent" class="p-6 md:p-8">
                <div class="text-center">
                    <div class="loading-spinner mx-auto"></div>
                    <p class="text-gray-500 mt-4">·ûÄ·üÜ·ûñ·ûª·ûÑ·ûï·üí·ûë·ûª·ûÄ·û¢·ûè·üí·ûê·ûî·ûë...</p>
                </div>
            </div>
        </div>

      <!-- In article.html -->
<div id="relatedArticles" class="glass-effect rounded-2xl shadow-xl p-6 smooth-transition">
    <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
        <i class="fas fa-wave-square brand-color mr-2"></i>
        ·û¢·ûè·üí·ûê·ûî·ûë·ûñ·û∂·ûÄ·üã·ûñ·üê·ûì·üí·ûí
    </h3>
    <div id="relatedArticlesList" class="space-y-3">
        <!-- Related articles will be loaded here -->
    </div>
</div>
    </main>

    <!-- Audio Player - Fixed Bottom -->
    <div id="audioPlayerContainer" class="fixed bottom-0 left-0 right-0 z-40">
        <!-- Mini Player (Collapsed) -->
        <div id="miniPlayer" class="glass-effect border-t shadow-lg mx-4 mb-4 rounded-2xl smooth-transition">
            <div class="p-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3 flex-1 min-w-0">
                        <img id="miniThumbnail" src="" alt="" class="w-12 h-12 rounded-xl object-cover shadow-md">
                        <div class="min-w-0 flex-1">
                            <h4 id="miniTitle" class="font-semibold text-sm text-gray-800 truncate">·ûá·üí·ûö·ûæ·ûü·ûö·ûæ·ûü·û¢·ûè·üí·ûê·ûî·ûë</h4>
                            <p id="miniCategory" class="text-xs text-gray-500 truncate"></p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-3">
                        <button id="miniPlayBtn" class="w-10 h-10 brand-bg text-white rounded-full flex items-center justify-center hover:bg-red-700 smooth-transition pulse-animation">
                            <i class="fas fa-play text-xs"></i>
                        </button>
                        <button id="expandPlayer" class="text-gray-500 hover:brand-color smooth-transition">
                            <i class="fas fa-chevron-up"></i>
                        </button>
                    </div>
                </div>
                
                            <!-- Progress Bar - Mini Player -->
                <div class="mt-3">
                        <div class="flex justify-between text-xs text-gray-500 mb-1 tabular-nums">
                            <span id="miniCurrentTime" class="time-display">0:00</span>
                            <span id="miniDuration" class="time-display">0:00</span>
                        </div>
                    <div class="relative">
                        <div class="w-full bg-gray-300 rounded-full h-1.5 ">
                            <div id="miniProgress" class="brand-bg h-1.5 rounded-full transition-all duration-100" style="width: 0%"></div>
                        </div>
                        <div id="miniProgressHandle" class="absolute top-1/2 w-3 h-3 bg-white border-2 border-red-600 rounded-full shadow-lg transform -translate-y-1/2 transition-all duration-100" style="left: 0%"></div>
                        <input type="range" id="miniProgressInput" 
                            class="absolute top-0 left-0 w-full h-3 opacity-0 cursor-pointer"
                            min="0" max="100" step="0.1" value="0">
                    </div>
                </div>
            </div>
        </div>

        <!-- Full Player (Expanded) -->
        <div id="fullPlayer" class="glass-effect border-t shadow-2xl rounded-t-3xl smooth-transition transform translate-y-full absolute bottom-0 left-0 right-0">
            <!-- Drag Handle -->
            <div class="flex justify-center pt-3 pb-2">
                <div class="w-12 h-1 bg-gray-300 rounded-full"></div>
            </div>
            
            <div class="p-6">
                <!-- Track Info -->
                <div class="text-center mb-6">
                    <img id="fullThumbnail" src="" alt="" class="w-48 h-48 rounded-2xl object-cover shadow-lg mx-auto mb-4">
                    <h2 id="fullTitle" class="text-xl font-bold text-gray-800 mb-2">·ûá·üí·ûö·ûæ·ûü·ûö·ûæ·ûü·û¢·ûè·üí·ûê·ûî·ûë</h2>
                    <p id="fullCategory" class="text-gray-500"></p>
                </div>

                <!-- Progress Section -->
<div class="mb-8">
    <div class="flex justify-between text-sm text-gray-600 mb-3 tabular-nums">
    <span id="fullCurrentTime" class="time-display font-medium">0:00</span>
    <span id="fullDuration" class="time-display font-medium">0:00</span>
</div>
        <div class="relative group h-2">
    <!-- Background track -->
    <div class="w-full bg-gray-300 rounded-full h-2 absolute top-0 left-0">
        <!-- Progress fill -->
        <div id="fullProgress" class="brand-bg h-2 rounded-full transition-all duration-100 absolute top-0 left-0 z-10" style="width: 0%"></div>
    </div>
    <!-- Progress handle (dot) -->
    <div id="fullProgressHandle" class="absolute top-0 w-4 h-4 bg-white border-3 border-red-600 rounded-full shadow-lg transform -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-all duration-100 z-20" style="left: 0%; margin-top: -2px;"></div>
    <!-- Clickable area -->
    <input type="range" id="progressInput" 
           class="absolute top-0 left-0 w-full h-4 opacity-0 cursor-pointer z-30"
           min="0" max="100" step="0.1" value="0">
</div>
</div>

                <!-- Controls -->
                <div class="flex items-center justify-center space-x-6 mb-6">
                    <button id="rewindBtn" class="w-10 h-10 text-gray-600 hover:brand-color smooth-transition" title="Rewind 15s">
                        <i class="fas fa-rotate-left text-lg"></i>
                    </button>
                    
                    <button id="playPauseBtn" class="w-16 h-16 brand-bg text-white rounded-full flex items-center justify-center hover:bg-red-700 smooth-transition shadow-lg pulse-animation">
                        <i id="playIcon" class="fas fa-play"></i>
                        <i id="pauseIcon" class="fas fa-pause hidden"></i>
                    </button>
                    
                    <button id="forwardBtn" class="w-10 h-10 text-gray-600 hover:brand-color smooth-transition" title="Forward 15s">
                        <i class="fas fa-rotate-right text-lg"></i>
                    </button>
                </div>

                <!-- Additional Controls -->
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <button id="volumeBtn" class="text-gray-600 hover:brand-color smooth-transition">
                            <i class="fas fa-volume-up"></i>
                        </button>
                        <input type="range" id="volumeControl" 
                               class="w-20 h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                               min="0" max="100" value="100">
                    </div>
                    
                    <button id="speedBtn" class="text-gray-600 hover:brand-color smooth-transition text-sm font-medium">
                        1.0x
                    </button>
                    
                    <button id="collapsePlayer" class="text-gray-600 hover:brand-color smooth-transition">
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

        <!-- Your existing audio player HTML -->

    <!-- ========== UPDATE SCRIPT TAGS ========== -->
    <script>
        console.log('üìÑ ARTICLE PAGE: Starting script execution');
    </script>

    <!-- Load audioPlayer.js first -->
    <script src="/assets/js/audioPlayer.js"></script>
    
    <!-- Load article.js second -->
    <script src="/assets/js/article.js"></script>
    <!-- Add this line -->
<script src="/assets/js/config.js"></script>

<script>
    console.log('üìÑ ARTICLE PAGE: Starting script execution');
    
    // Wait for DOM to be fully ready
    document.addEventListener('DOMContentLoaded', function() {
        console.log('üöÄ DOM fully loaded');
        
        // Initialize audio player UI events after DOM is ready
        if (window.audioPlayer) {
            console.log('üîß Setting up audio player UI events');
            window.audioPlayer.setupUIEvents();
        }
        
        // Test function
        window.testButtons = function() {
            console.log('üß™ Testing buttons...');
            console.log('rewindBtn:', document.getElementById('rewindBtn'));
            console.log('forwardBtn:', document.getElementById('forwardBtn'));
            
            // Test skip functionality
            if (window.audioPlayer) {
                window.audioPlayer.skip(-10);
                console.log('‚úÖ Skip test completed');
            }
        };
        
        console.log('‚úÖ Audio player ready - buttons should work now!');
    });
</script>

<!-- Load scripts -->
<script src="/assets/js/audioPlayer.js"></script>
<script src="/assets/js/article.js"></script>
</body>
</html>